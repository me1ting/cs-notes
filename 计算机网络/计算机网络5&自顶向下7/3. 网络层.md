# 网络层

网络层负责将数据包从源端传输到接收端，其中会经历许多中间设备。

# 历史：分组交换网络&虚电路网络
争论点在于`无连接服务`还是`面向连接服务`，争论双方为Internet新贵阵营和电话公司这样的传统阵营。

无连接服务的传输线路是动态的，每个路由器根据路由表来判断携带目标地址的数据包应该发送到哪条线路。

面向连接的服务的传输线路在传输前就应该确定，并在整个传输过程中保持不变，称为`虚电路`。

真实的网络采取的是无连接服务，因此只需要了解存在这两个概念区别。

# 基本模型：存储转发数据包
作为中间节点的路由器会对数据包进行存储，处理，然后选择一条合适的路径进行继续发送，这是路由器的`基本运行模型`。

# 路由算法
无论是数据报网络还是虚电路网络，都需要使用路由算法来判断传输路径，区别在于前者一直使用，后者只有建立连接阶段才使用。

## 最短路径算法
如果已知网络全貌，可以使用图论的最短路径算法计算得出端点之间的最短路径。

## 泛洪算法
路由器向所有出境路由发送数据包。

## 链路状态路由
是目前广泛使用的路由算法。

其基本思想是每个路由器测量其邻居路由的延迟信息，并通过泛洪算法传播到整个网络，每个路由器接收到其它路由器发送的链路状态包后，根据已有信息使用最短路径算法构建当前网络的延迟图。

# IP协议
网络层最流行的协议是IP协议，这里我们只简单的了解一下IPV4协议。

## IPV4
IPv4的基本传输单元称为`数据报`，可以分为`报头`和`承载数据`两部分。

IPv4报头主要包括：

- 源地址
- 目标地址
- 总长度，理论长度是65535但受到MTU影响
- 生存期，每经过一个路由器减1，等于0则被丢弃，避免数据报一直存在于网络中