# 分组密码与流密码
`分组密码`：处理特定长度的块的密码

`流密码`：对数据流进行连续处理的密码

从本质上来讲两者的处理单位都是`块`，唯一区别在于状态，前者不需要，后者需要。

*但是使用了模式以后，大部分模式都存在状态，也有的将模式称为流密码*

当最后一个分组小于分组长度时，分组密码需要使用特定数据进行填充。

# 理解模式
对于远远超过分组大小的现实数据，需要一种**迭代方法**来对数据进行拆分为分组进行加密，这种方法称为`模式`。

# ECB模式
简单的拆分为组进行加密，再进行组装。

其缺点很明显，攻击者可以通过移动密文分组的位置来实现攻击。因此ECB是一种从不应该被使用的模式。

# CBC模式
将前一个密文分组与当前明文分组的内容混合进行加密。

## 初始化向量
第一个分组加密时，需要准备一个伪加密分组参与加密，称为`初始化向量`（initialization vector,简称IV）。

一般使用一串伪随机数作为初始化向量。

## CBC的风险
CBC存在第一个明文分组的`位翻转攻击`的风险。

# CFB模式
将明文分组与前一个密文分组加密的结果进行异或，得到密文分组。

同样需要初始化向量。

## CFB的风险
CFB存在`重放攻击`的风险。

# OFB模式
将明文分组与初始化向量不断进行加密的结果进行异或，得到密文分组。

其特点是每次异或可以并行进行，因此理论上来讲速度很快。

# CTR模式
使用一个计数器，其递增再加密的结果与明文分组进行异或，得到密文分组。

相比OFB，CTR的并行性更高。

## CTR的风险
类似OFB可以对任意分组进行`位翻转`攻击。

# 小结
对称密码技术为了实现对超过块长度的数据进行加密，引入了模式的概念。模式独立于对称密码，不同的模式都有其各自的特点和缺点。

目前，业界只推荐CBC和CTR两种模式。